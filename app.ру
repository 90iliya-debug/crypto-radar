
import streamlit as st
import requests
import time
from datetime import datetime

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
COINS = {
    "1000SATS": {"sym": "1000SATSUSDT", "prec": 8, "lev": "3x-5x"},
    "DOGE":     {"sym": "DOGEUSDT",     "prec": 5, "lev": "5x-10x"},
    "SHIBA":    {"sym": "SHIBUSDT",     "prec": 8, "lev": "3x-5x"},
    "LUNC":     {"sym": "LUNCUSDT",     "prec": 7, "lev": "2x-3x"}
}

st.set_page_config(page_title="1000SATS Web Radar", page_icon="üìà")

def get_data(symbol):
    url = f"https://api.binance.com/api/v3/klines?symbol={symbol}&interval=15m&limit=50"
    try:
        res = requests.get(url).json()
        return [{"h": float(k[2]), "l": float(k[3]), "c": float(k[4])} for k in res]
    except: return None

st.title("üöÄ 1000SATS Smart Money Web Radar")
st.write(f"–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –°–µ–π—á–∞—Å: {datetime.now().strftime('%H:%M:%S')}")

cols = st.columns(2) # –†–∞–∑–¥–µ–ª–∏–º —ç–∫—Ä–∞–Ω –Ω–∞ 2 –∫–æ–ª–æ–Ω–∫–∏

for i, (name, info) in enumerate(COINS.items()):
    data = get_data(info['sym'])
    if data:
        price = data[-1]['c']
        ob_low = min([d['l'] for d in data[-20:]])
        ob_high = max([d['h'] for d in data[-20:]])
        
        with cols[i % 2]:
            st.info(f"### {name}")
            st.metric("–¶–µ–Ω–∞ USDT", f"{price:.{info['prec']}f}")
            
            if price <= ob_low * 1.002:
                st.success(f"üü¢ –°–ò–ì–ù–ê–õ: LONG | –ü–ª–µ—á–æ {info['lev']}")
            elif price >= ob_high * 0.998:
                st.error(f"üî¥ –°–ò–ì–ù–ê–õ: SHORT | –ü–ª–µ—á–æ {info['lev']}")
            else:
                st.warning("üîé –ü–æ–∏—Å–∫ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞...")
            
            st.write(f"–£—Ä–æ–≤–Ω–∏: üü¢ {ob_low:.{info['prec']}f} | üî¥ {ob_high:.{info['prec']}f}")
            st.markdown("---")

# –ö–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
if st.button('–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ'):
    st.rerun()
